clear
close

diary processingResultsTrial2.txt
introStatement = 'This script will process the OpenFace dataset through various face thresholds ranging from 0.30 to 0.60 in steps of 0.10. CAMREC Trial 2';
disp(introStatement)
classifierPath = pwd;

for faceThreshold = 0.30:.10:0.60
    faceThresholdProgress = 'Now beginning processing with %d face threshold.';
    faceThresholdProgressString = sprintf(faceThresholdProgress,faceThreshold);
    filePath = uigetdir(matlabroot,'Select the folder of processed files you would like to analyze');
    cd(filePath);
  
    csv_files = dir('*.csv');
    for fileNumber = 1:length(csv_files)
        csv_names{fileNumber} = csv_files(fileNumber).name;
    end

    for fileLoadNumber = 1:length(csv_files)
        fileLoad = csv_names{fileLoadNumber};
        videoProgress = 'Now beginning processing for %s with %d face threshold.';
        videoProgressString = sprintf(videoProgress,fileLoad,faceThreshold)
        totalBadFrame = 0;
        totalFrame = 0;
        cd(classifierPath) %File Path of Classifier Call
        OpenFaceMinMaxClassifierCall;
    end
    completionStatement = 'Processing for %d threshold complete. In total, there were %d bad frames out of %d total frames processed. This yields an error rate of %d%.';
    errorRate = totalBadFrame/totalFrame * 100;
    completionStatementString = sprintf(completionStatement,faceThreshold,totalBadFrame,totalFrame,errorRate)
end

writematrix(outputMatrix, 'outputMatrixCAMRECUI.csv');
diary off
